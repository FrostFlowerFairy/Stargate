<template>
  <main>
    <section class="type-scale">
      <h2 class="tm-rf3 tm-lh-title tm-bold">Type scale</h2>
      <div class="row">
        <div class="colhead tm-rf-1 tm-lh-solid">Step</div>
        <div class="colhead tm-rf-1 tm-lh-solid base-step">Base: 0</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">7</div>
        <div class="text log tm-rf7 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">6</div>
        <div class="text log tm-rf6 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">5</div>
        <div class="text log tm-rf5 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">4</div>
        <div class="text log tm-rf4 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text log tm-rf3 tm-lh-title">Subtitle</div>
        <div class="text log tm-rf3 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text log tm-rf2 tm-lh-title">Subtitle</div>
        <div class="text log tm-rf2 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text log tm-rf1 tm-lh-title">Subtitle</div>
        <div class="text log tm-rf1 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row base-step">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text log tm-rf0 tm-lh-title">Subtitle</div>
        <div class="text log tm-rf0 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text log tm-rf-1 tm-lh-title">Subtitle</div>
        <div class="text log tm-rf-1 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text log tm-rf3 tm-lh-copy">Paragraph</div>
        <div class="text log tm-rf3 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text log tm-rf2 tm-lh-copy">Paragraph</div>
        <div class="text log tm-rf2 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text log tm-rf1 tm-lh-copy">Paragraph</div>
        <div class="text log tm-rf1 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row base-step">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text log tm-rf0 tm-lh-copy">Paragraph</div>
        <div class="text log tm-rf0 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text log tm-rf-1 tm-lh-copy">Paragraph</div>
        <div class="text log tm-rf-1 tm-bold tm-lh-copy">Paragraph</div>
      </div>
    </section>
    <section class="type-scale type-scale-wrap">
      <h2 class="tm-rf3 tm-lh-title tm-bold">Line-heights</h2>
      <div class="row line-height-scale">
        <div class="text tm-rf0 tm-lh-solid">Solid line-height (1)</div>
        <div class="text tm-rf0 tm-lh-title">Title line-height</div>
        <div class="text tm-rf0 tm-lh-copy">Copy line-height</div>
      </div>
      <div class="row">
        <div class="colhead tm-rf-1 tm-lh-solid">Step</div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">7</div>
        <div class="text tm-rf7 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">6</div>
        <div class="text tm-rf6 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">5</div>
        <div class="text tm-rf5 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">4</div>
        <div class="text tm-rf4 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text tm-rf3 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
        <div class="text tm-rf3 tm-lh-title tm-measure-narrower">
          Subtitle that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text tm-rf2 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
        <div class="text tm-rf2 tm-lh-title tm-measure-narrower">
          Subtitle that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text tm-rf1 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
        <div class="text tm-rf1 tm-lh-title tm-measure-narrower">
          Subtitle that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row base-step">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text tm-rf0 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
        <div class="text tm-rf0 tm-lh-title tm-measure-narrower">
          Subtitle that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text tm-rf-1 tm-bold tm-lh-title tm-measure-narrower">
          Heading that wraps onto multiple lines to demonstrate the leading.
        </div>
        <div class="text tm-rf-1 tm-lh-title tm-measure-narrower">
          Subtitle that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text tm-rf3 tm-lh-copy tm-measure-narrower">
          Paragraph that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text tm-rf2 tm-lh-copy tm-measure-narrower">
          Paragraph that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text tm-rf1 tm-lh-copy tm-measure-narrower">
          Paragraph that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row base-step">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text tm-rf0 tm-lh-copy tm-measure-narrower">
          Paragraph that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text tm-rf-1 tm-lh-copy tm-measure-narrower">
          Paragraph that wraps onto multiple lines to demonstrate the leading.
        </div>
      </div>
    </section>
    <section class="font-weight-scale">
      <h2 class="tm-rf3 tm-lh-title tm-bold">Weights</h2>
      <div class="row var-weight">
        <div class="colhead tm-rf-1 tm-lh-solid"><div>Step</div></div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Extra Light<br />
            200
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Light<br />
            300
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Regular<br />
            400
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Medium<br />
            500
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Semi Bold<br />
            600
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Bold<br />
            700
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Extra Bold<br />
            800
          </div>
        </div>
        <div class="colhead tm-rf-1 tm-lh-solid">
          <div>
            Black<br />
            900
          </div>
        </div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">7</div>
        <div class="text tm-rf7 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">6</div>
        <div class="text tm-rf6 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">5</div>
        <div class="text tm-rf5 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">4</div>
        <div class="text tm-rf4 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text tm-rf3 tm-lh-title">Subtitle</div>
        <div class="text tm-rf3 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text tm-rf2 tm-lh-title">Subtitle</div>
        <div class="text tm-rf2 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text tm-rf1 tm-lh-title">Subtitle</div>
        <div class="text tm-rf1 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text tm-rf0 tm-lh-title">Subtitle</div>
        <div class="text tm-rf0 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text tm-rf-1 tm-lh-title">Subtitle</div>
        <div class="text tm-rf-1 tm-bold tm-lh-title">Heading</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">3</div>
        <div class="text tm-rf3 tm-lh-copy">Paragraph</div>
        <div class="text tm-rf3 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <div class="text tm-rf2 tm-lh-copy">Paragraph</div>
        <div class="text tm-rf2 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text tm-rf1 tm-lh-copy">Paragraph</div>
        <div class="text tm-rf1 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text tm-rf0 tm-lh-copy">Paragraph</div>
        <div class="text tm-rf0 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text tm-rf-1 tm-lh-copy">Paragraph</div>
        <div class="text tm-rf-1 tm-bold tm-lh-copy">Paragraph</div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <div class="text tm-rf1 tm-medium tm-lh-title tm-overline">
          Overline
        </div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <div class="text tm-rf0 tm-medium tm-lh-title tm-overline">
          Overline
        </div>
      </div>
      <div class="row var-weight">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <div class="text tm-rf-1 tm-medium tm-lh-title tm-overline">
          Overline
        </div>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">2</div>
        <code class="tm-rf2 tm-lh-copy">Code</code>
        <code class="tm-rf2 tm-bold tm-lh-copy">Code</code>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">1</div>
        <code class="tm-rf1 tm-lh-copy">Code</code>
        <code class="tm-rf1 tm-bold tm-lh-copy">Code</code>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">0</div>
        <code class="tm-rf0 tm-lh-copy">Code</code>
        <code class="tm-rf0 tm-bold tm-lh-copy">Code</code>
      </div>
      <div class="row">
        <div class="rowhead tm-rf-1 tm-lh-solid">-1</div>
        <code class="tm-rf-1 tm-lh-copy">Code</code>
        <code class="tm-rf-1 tm-bold tm-lh-copy">Code</code>
      </div>
    </section>
  </main>
</template>

<script>
export default {
  mounted() {
    window.addEventListener('resize', this.onWindowResize)
    this.updateInfo()
    this.fontWeightX()
  },
  methods: {
    onWindowResize() {
      this.updateInfo()
      this.fontWeightX()
    },
    updateInfo() {
      const text = document.querySelectorAll('.log')
      Array.prototype.forEach.call(text, function (t) {
        const styles = getComputedStyle(t)
        const lh = parseFloat(styles.lineHeight.replace('px', ''))
        const fs = parseFloat(styles.fontSize.replace('px', ''))
        const fw = styles.fontWeight
        const ls = parseFloat(styles.letterSpacing.replace('px', '')) || 0
        const ratio = Math.round((lh / fs) * 1000) / 1000
        const roundedFs = Math.round(fs * 100) / 100
        const roundedLs = Math.round((ls / fs) * 1000) / 1000
        t.setAttribute(
          'data-info',
          roundedFs + 'px / ' + ratio + ' / ' + fw + ' / ' + roundedLs + 'em'
        )
      })
    },
    fontWeightX() {
      const text = document.querySelectorAll('.var-weight > .text')
      Array.prototype.forEach.call(text, function (t) {
        const fw = getComputedStyle(t).fontWeight
        if (
          t.classList.contains('tm-bold') ||
          t.classList.contains('tm-medium')
        )
          // weight = starting col (600 weight) / 4 colspan * %
          t.style.transform = `translateX(${(fw - 700) / 6}%)`
        // weight = starting col (400 weight) / 4 colspan * %
        else t.style.transform = `translateX(${(fw - 400) / 2}%)`
      })
    },
  },
}
</script>

<style lang="stylus" scoped>

main
  padding 5rem 1.5rem

.row
  width 100%
  display grid
  grid-template-columns repeat(11, 1fr)
  align-items baseline
  .type-scale-wrap &
    display block
    max-width $max-width['8']

.rowhead,
.colhead
  grid-column span 1
  position relative
  opacity .7
  min-width 0 // prevent intrinsic size of column based on content
.font-weight-scale .colhead
  > div
    white-space nowrap
    overflow hidden
    width 100%
  + .colhead:before
    content ""
    border-left 1px dotted rgba(255, 255  255, 0.5);
    height 200vh
    top 0
    position absolute

.text,
code
  white-space nowrap
  position relative
  // overflow hidden
  .type-scale-wrap &
    white-space normal
  &:before
    content ""
    border-left 1px solid cyan
    height 100%
    top 0
    position absolute

.base-step
  color salmon

.text
  grid-column 2/span 4
  &:last-child
    grid-column 6/span 6

.font-weight-scale
  .text
    grid-column 4/span 2
    &:last-child
      grid-column 7/span 6

  code
    grid-column 4/span 2
    &:last-child
      grid-column 7/span 6

.line-height-scale
  margin-bottom var(--spacing-2)
  .text
    background darkcyan
    display inline-block
    vertical-align baseline


// .font-weight-scale
//   for size in -1...6
//     .var-weight .tm-rf{size}:not(.tm-bold):not(.rowhead)
//       // weight = starting col (300 weight) / 3 colspan * %
//       transform: translateX(((356 - size * 24) - 300)/3 * 1%)
//
//   for size in -1...12
//     .var-weight .tm-rf{size}.tm-bold
//       // weight = starting col (600 weight) / 4 colspan * %
//       transform: translateX(((690 + size * 30) - 600)/4 * 1%)

[data-info]::after
    content attr(data-info)
    display block
    opacity 0.7
    rfs($font-size-step['-1'])
    line-height var(--line-height-copy--1)
    letter-spacing var(--letter-spacing-normal--1)
    font-weight var(--font-weight-normal--1)
</style>
